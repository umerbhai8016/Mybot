<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CodeXGPT</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
:root{
  --bg:#080810;
  --surface:rgba(12,12,24,0.97);
  --border:rgba(255,255,255,0.07);
  --a1:#E945F5;
  --a2:#2F4BC0;
  --a3:#667eea;
  --a4:#764ba2;
  --text:#f0f0f8;
  --muted:rgba(240,240,248,0.45);
  --sw:270px;
  --r:14px;
}
html,body{height:100%;font-family:'Space Grotesk',sans-serif;background:var(--bg);color:var(--text);overflow:hidden;}
::-webkit-scrollbar{width:5px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.15);border-radius:99px;}

/* BG Canvas */
#bgCanvas{position:fixed;inset:0;z-index:0;pointer-events:none;}

/* ‚îÄ‚îÄ SCREENS ‚îÄ‚îÄ */
.screen{position:fixed;inset:0;z-index:10;display:none;}
.screen.active{display:flex;}

/* ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ */
#authScreen{align-items:center;justify-content:center;}
.auth-card{
  background:var(--surface);border:1px solid var(--border);
  border-radius:20px;padding:40px 36px;width:100%;max-width:400px;
  backdrop-filter:blur(24px);
  box-shadow:0 24px 64px rgba(0,0,0,0.5),0 0 0 1px rgba(255,255,255,0.04);
  animation:slideUp .35s ease both;
}
.auth-logo{
  width:64px;height:64px;border-radius:18px;margin:0 auto 20px;
  background:linear-gradient(135deg,var(--a1),var(--a2));
  display:flex;align-items:center;justify-content:center;font-size:30px;
  box-shadow:0 0 30px rgba(233,69,245,0.4);
}
.auth-title{font-size:22px;font-weight:700;text-align:center;margin-bottom:5px;}
.auth-sub{font-size:13px;color:var(--muted);text-align:center;margin-bottom:26px;}
.auth-err{
  background:rgba(255,80,80,0.12);border:1px solid rgba(255,80,80,0.3);
  border-radius:10px;padding:10px 14px;font-size:13px;color:#ff8080;
  margin-bottom:14px;display:none;
}
.auth-err.show{display:block;}
.inp-grp{margin-bottom:15px;}
.inp-grp label{font-size:11px;font-weight:600;color:var(--muted);display:block;margin-bottom:6px;text-transform:uppercase;letter-spacing:.05em;}
.inp-grp input{
  width:100%;padding:12px 14px;background:rgba(255,255,255,0.05);
  border:1px solid var(--border);border-radius:10px;color:var(--text);
  font-size:14px;font-family:inherit;outline:none;transition:border-color .2s;
}
.inp-grp input:focus{border-color:rgba(102,126,234,.5);}
.auth-btn{
  width:100%;padding:13px;border-radius:12px;border:none;cursor:pointer;
  background:linear-gradient(135deg,var(--a3),var(--a4));
  color:#fff;font-size:15px;font-weight:600;font-family:inherit;
  transition:all .25s;margin-top:6px;display:flex;align-items:center;justify-content:center;gap:8px;
}
.auth-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(102,126,234,.4);}
.auth-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;}
.auth-footer{text-align:center;margin-top:20px;font-size:13px;color:var(--muted);}
.auth-link{background:none;border:none;cursor:pointer;color:var(--a3);font-size:13px;font-family:inherit;}
.auth-link:hover{color:var(--a4);}

/* ‚îÄ‚îÄ CHAT APP ‚îÄ‚îÄ */
#chatScreen{flex-direction:row;}

/* Hamburger */
#hamburger{
  position:fixed;top:16px;left:16px;z-index:110;
  background:rgba(102,126,234,.18);border:1px solid rgba(102,126,234,.3);
  border-radius:10px;width:40px;height:40px;
  display:none;align-items:center;justify-content:center;
  cursor:pointer;color:var(--text);font-size:18px;transition:all .2s;
}
#hamburger:hover{background:rgba(102,126,234,.3);}
#hamburger.visible{display:flex;}

/* Sidebar */
#sidebar{
  width:var(--sw);min-width:var(--sw);
  background:var(--surface);backdrop-filter:blur(24px);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  position:relative;z-index:100;
  transition:transform .3s cubic-bezier(.4,0,.2,1),width .3s;
}
#sidebar.closed{transform:translateX(-100%);position:absolute;height:100%;}
.sb-header{
  padding:22px 16px 16px;display:flex;align-items:center;gap:10px;
  border-bottom:1px solid var(--border);
}
.brand-logo{
  width:36px;height:36px;border-radius:10px;flex-shrink:0;
  background:linear-gradient(135deg,var(--a1),var(--a2));
  display:flex;align-items:center;justify-content:center;font-size:17px;
}
.brand-name{
  font-size:16px;font-weight:700;flex:1;
  background:linear-gradient(90deg,var(--a3),var(--a4));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.sb-close{
  background:rgba(255,255,255,.05);border:1px solid var(--border);
  color:var(--muted);width:30px;height:30px;border-radius:8px;
  display:flex;align-items:center;justify-content:center;cursor:pointer;
  transition:all .2s;font-size:16px;flex-shrink:0;
}
.sb-close:hover{background:rgba(255,255,255,.1);color:var(--text);}
.new-chat-btn{
  margin:14px 14px 6px;padding:11px 14px;
  background:linear-gradient(135deg,var(--a3),var(--a4));
  border-radius:var(--r);font-weight:600;font-size:14px;
  color:#fff;display:flex;align-items:center;gap:8px;
  cursor:pointer;transition:all .25s;border:none;
}
.new-chat-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(102,126,234,.4);}
#sessionsList{flex:1;overflow-y:auto;padding:6px 8px;}
.sess-item{
  display:flex;align-items:center;gap:10px;
  padding:10px;border-radius:10px;cursor:pointer;
  transition:background .18s;margin-bottom:3px;
  background:rgba(255,255,255,.02);border:1px solid transparent;
  animation:slideUp .2s ease both;
}
.sess-item:hover{background:rgba(255,255,255,.07);}
.sess-item.active{background:rgba(102,126,234,.18)!important;border-color:rgba(102,126,234,.3);}
.sess-icon{color:var(--muted);flex-shrink:0;font-size:15px;}
.sess-info{flex:1;min-width:0;}
.sess-title{font-size:13px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:rgba(255,255,255,.88);}
.sess-date{font-size:11px;color:var(--muted);margin-top:1px;}
.sess-del{
  opacity:0;background:none;border:none;cursor:pointer;
  color:rgba(255,80,80,.7);padding:3px;border-radius:5px;
  transition:all .2s;display:flex;align-items:center;flex-shrink:0;
}
.sess-item:hover .sess-del{opacity:1;}
.sess-del:hover{color:rgb(255,80,80);transform:scale(1.1);}
.sb-footer{padding:14px;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:10px;}
.credits{font-size:11px;color:var(--muted);text-align:center;}
.credits a{color:var(--a3);text-decoration:none;}
.user-row{
  display:flex;align-items:center;gap:10px;
  padding:8px 10px;border-radius:10px;
  background:rgba(255,255,255,.04);border:1px solid var(--border);
}
.avatar{
  width:32px;height:32px;border-radius:50%;flex-shrink:0;
  background:linear-gradient(135deg,var(--a1),var(--a2));
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:13px;
}
.uname{flex:1;font-size:13px;font-weight:500;}
.logout-btn{
  background:none;border:none;cursor:pointer;color:var(--muted);
  font-size:12px;display:flex;align-items:center;gap:4px;transition:color .2s;
}
.logout-btn:hover{color:var(--text);}

/* Chat Area */
#chatArea{flex:1;display:flex;flex-direction:column;min-width:0;position:relative;z-index:1;}
#messages{
  flex:1;overflow-y:auto;padding:24px 0;
  display:flex;flex-direction:column;
}

/* Empty state */
#emptyState{
  flex:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  padding:40px 24px;text-align:center;gap:12px;
}
.empty-logo{
  width:72px;height:72px;border-radius:20px;
  background:linear-gradient(135deg,var(--a1),var(--a2));
  display:flex;align-items:center;justify-content:center;font-size:32px;
  margin-bottom:8px;box-shadow:0 0 40px rgba(233,69,245,.3);
  animation:pulsate 3s ease-in-out infinite;
}
.empty-title{font-size:22px;font-weight:700;}
.empty-sub{font-size:14px;color:var(--muted);max-width:360px;line-height:1.6;}
.suggestions{
  display:grid;grid-template-columns:1fr 1fr;gap:10px;
  margin-top:16px;width:100%;max-width:540px;
}
.sug-card{
  padding:14px 16px;border-radius:var(--r);
  background:rgba(255,255,255,.04);border:1px solid var(--border);
  text-align:left;cursor:pointer;transition:all .2s;
  color:var(--text);font-size:13px;font-weight:500;font-family:inherit;
  display:flex;align-items:center;gap:10px;
}
.sug-card:hover{background:rgba(255,255,255,.08);border-color:rgba(102,126,234,.3);transform:translateY(-2px);}
.sug-icon{color:var(--a3);font-size:18px;flex-shrink:0;}

/* Messages */
.msg-row{
  padding:10px 24px;display:flex;gap:14px;align-items:flex-start;
  animation:slideUp .3s ease both;
}
.msg-row.user{flex-direction:row-reverse;}
.msg-av{
  width:34px;height:34px;border-radius:50%;flex-shrink:0;
  display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;
}
.msg-av.ai{background:linear-gradient(135deg,var(--a1),var(--a2));}
.msg-av.usr{background:linear-gradient(135deg,var(--a3),var(--a4));}
.msg-bubble{
  max-width:72%;padding:13px 17px;border-radius:18px;
  font-size:14px;line-height:1.65;word-break:break-word;
}
.msg-bubble.ai{
  background:rgba(255,255,255,.06);border:1px solid var(--border);
  border-top-left-radius:4px;
}
.msg-bubble.usr{
  background:linear-gradient(135deg,rgba(102,126,234,.28),rgba(118,75,162,.28));
  border:1px solid rgba(102,126,234,.25);border-top-right-radius:4px;
}
.msg-bubble pre{
  background:rgba(0,0,0,.45);border-radius:8px;padding:12px;
  overflow-x:auto;margin:8px 0;font-family:'JetBrains Mono',monospace;font-size:13px;
}
.msg-bubble code{
  background:rgba(0,0,0,.35);border-radius:4px;padding:1px 5px;
  font-family:'JetBrains Mono',monospace;font-size:13px;
}
.msg-bubble pre code{background:none;padding:0;}
.msg-bubble p{margin-bottom:8px;}
.msg-bubble p:last-child{margin-bottom:0;}
.msg-bubble h1,.msg-bubble h2,.msg-bubble h3{margin:10px 0 6px;font-weight:600;}
.msg-bubble ul,.msg-bubble ol{margin:6px 0 6px 20px;}
.msg-bubble li{margin-bottom:3px;}
.msg-bubble strong{font-weight:600;color:#fff;}
.msg-bubble img{max-width:100%;border-radius:8px;margin-top:8px;}

/* Typing */
.typing-row{padding:10px 24px;display:flex;gap:14px;align-items:flex-start;}
.typing-dots{display:flex;gap:5px;align-items:center;padding:4px 0;}
.typing-dots span{
  width:7px;height:7px;border-radius:50%;
  background:var(--a3);animation:bounce 1.2s ease-in-out infinite;
}
.typing-dots span:nth-child(2){animation-delay:.2s;}
.typing-dots span:nth-child(3){animation-delay:.4s;}

/* Input area */
.input-area{
  padding:16px 24px 20px;
  border-top:1px solid var(--border);
  background:rgba(8,8,16,.85);backdrop-filter:blur(16px);
}
.input-wrap{
  display:flex;align-items:flex-end;gap:10px;
  background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);
  border-radius:16px;padding:10px 12px;transition:border-color .2s;
}
.input-wrap:focus-within{border-color:rgba(102,126,234,.5);}
.img-preview-wrap{position:relative;flex-shrink:0;}
.img-preview-wrap img{width:50px;height:50px;object-fit:cover;border-radius:8px;border:1px solid var(--border);}
.img-rm{
  position:absolute;top:-5px;right:-5px;
  background:#ff3333;border:none;cursor:pointer;border-radius:50%;
  width:18px;height:18px;display:flex;align-items:center;justify-content:center;
  color:#fff;font-size:10px;
}
.icon-btn{
  background:none;border:none;cursor:pointer;
  color:var(--muted);padding:5px;border-radius:8px;
  display:flex;align-items:center;transition:color .2s,background .2s;
  flex-shrink:0;font-size:18px;
}
.icon-btn:hover{color:var(--text);background:rgba(255,255,255,.08);}
.icon-btn:disabled{opacity:.35;cursor:not-allowed;}
.icon-btn.listening{color:var(--a1);animation:pulsate 1s ease-in-out infinite;}
#msgInput{
  flex:1;background:none;border:none;outline:none;
  color:var(--text);font-size:14px;font-family:inherit;
  resize:none;line-height:1.55;max-height:180px;padding:2px 0;
}
#msgInput::placeholder{color:var(--muted);}
.send-btn{
  background:linear-gradient(135deg,var(--a3),var(--a4));
  border:none;cursor:pointer;border-radius:10px;
  width:38px;height:38px;flex-shrink:0;
  display:flex;align-items:center;justify-content:center;
  color:#fff;transition:all .25s;font-size:16px;
}
.send-btn:hover:not(:disabled){transform:scale(1.08);box-shadow:0 4px 16px rgba(102,126,234,.45);}
.send-btn:disabled{opacity:.4;cursor:not-allowed;}

/* Spinner */
.spinner{
  width:16px;height:16px;border-radius:50%;
  border:2px solid rgba(255,255,255,.3);border-top-color:#fff;
  animation:spin .7s linear infinite;display:inline-block;
}

/* Keyframes */
@keyframes slideUp{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
@keyframes bounce{0%,80%,100%{transform:translateY(0);}40%{transform:translateY(-8px);}}
@keyframes spin{to{transform:rotate(360deg);}}
@keyframes pulsate{0%,100%{opacity:1;}50%{opacity:.4;}}

/* Responsive */
@media(max-width:640px){
  .suggestions{grid-template-columns:1fr;}
  .msg-bubble{max-width:88%;}
  #sidebar{position:absolute;height:100%;box-shadow:4px 0 30px rgba(0,0,0,.5);}
}

/* ‚îÄ‚îÄ README MODAL ‚îÄ‚îÄ */
#readmeBtn{
  position:fixed;bottom:20px;right:20px;z-index:200;
  background:linear-gradient(135deg,var(--a3),var(--a4));
  border:none;border-radius:50%;width:44px;height:44px;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-size:20px;
  box-shadow:0 4px 20px rgba(102,126,234,.5);
  transition:all .25s;
}
#readmeBtn:hover{transform:scale(1.1);box-shadow:0 6px 28px rgba(102,126,234,.7);}
#readmeOverlay{
  position:fixed;inset:0;z-index:300;
  background:rgba(0,0,0,.7);backdrop-filter:blur(6px);
  display:none;align-items:center;justify-content:center;padding:20px;
}
#readmeOverlay.open{display:flex;}
#readmeModal{
  background:var(--surface);border:1px solid var(--border);
  border-radius:20px;width:100%;max-width:640px;max-height:85vh;
  overflow-y:auto;
  box-shadow:0 24px 64px rgba(0,0,0,.6);
  animation:slideUp .3s ease both;
}
.readme-header{
  padding:24px 28px 0;display:flex;align-items:center;justify-content:space-between;
  position:sticky;top:0;background:var(--surface);
  border-bottom:1px solid var(--border);padding-bottom:16px;
  backdrop-filter:blur(10px);
}
.readme-header h2{
  font-size:20px;font-weight:700;
  background:linear-gradient(90deg,var(--a3),var(--a4));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.readme-close{
  background:rgba(255,255,255,.06);border:1px solid var(--border);
  color:var(--muted);width:32px;height:32px;border-radius:8px;
  display:flex;align-items:center;justify-content:center;cursor:pointer;
  font-size:18px;transition:all .2s;
}
.readme-close:hover{background:rgba(255,80,80,.15);color:#ff8080;}
.readme-body{padding:24px 28px;}
.readme-body h3{
  font-size:14px;font-weight:700;color:var(--a3);
  text-transform:uppercase;letter-spacing:.08em;
  margin:22px 0 10px;
}
.readme-body h3:first-child{margin-top:0;}
.readme-body p{font-size:14px;color:rgba(240,240,248,.8);line-height:1.7;margin-bottom:10px;}
.readme-body ul{margin:6px 0 12px 18px;}
.readme-body li{font-size:14px;color:rgba(240,240,248,.75);line-height:1.7;margin-bottom:4px;}
.readme-body code{
  background:rgba(0,0,0,.4);border:1px solid var(--border);
  border-radius:6px;padding:2px 7px;
  font-family:'JetBrains Mono',monospace;font-size:13px;color:var(--a3);
}
.readme-body pre{
  background:rgba(0,0,0,.5);border:1px solid var(--border);
  border-radius:10px;padding:14px 16px;
  font-family:'JetBrains Mono',monospace;font-size:13px;
  color:rgba(240,240,248,.85);overflow-x:auto;margin:10px 0 16px;
  line-height:1.6;
}
.badge-row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;}
.badge{
  padding:4px 12px;border-radius:99px;font-size:12px;font-weight:600;
  border:1px solid;
}
.badge.purple{background:rgba(102,126,234,.15);border-color:rgba(102,126,234,.4);color:var(--a3);}
.badge.pink{background:rgba(233,69,245,.12);border-color:rgba(233,69,245,.4);color:var(--a1);}
.badge.green{background:rgba(0,200,100,.1);border-color:rgba(0,200,100,.3);color:#00c864;}
.step-row{
  display:flex;gap:12px;align-items:flex-start;
  margin-bottom:14px;
}
.step-num{
  width:26px;height:26px;border-radius:50%;flex-shrink:0;
  background:linear-gradient(135deg,var(--a3),var(--a4));
  display:flex;align-items:center;justify-content:center;
  font-size:12px;font-weight:700;margin-top:1px;
}
.step-text{font-size:14px;color:rgba(240,240,248,.8);line-height:1.65;}
</style>
</head>
<body>

<!-- Background Canvas -->
<canvas id="bgCanvas"></canvas>

<!-- ‚îÄ‚îÄ AUTH SCREEN ‚îÄ‚îÄ -->
<div id="authScreen" class="screen active">
  <div class="auth-card">
    <div class="auth-logo">ü§ñ</div>
    <div class="auth-title" id="authTitle">Welcome Back</div>
    <div class="auth-sub" id="authSub">Sign in to continue chatting</div>
    <div class="auth-err" id="authErr"></div>
    <div id="authFields">
      <div class="inp-grp">
        <label>Username</label>
        <input type="text" id="inpUser" placeholder="Enter your username" autocomplete="username"/>
      </div>
      <div class="inp-grp" id="emailGrp" style="display:none">
        <label>Email</label>
        <input type="email" id="inpEmail" placeholder="Enter your email" autocomplete="email"/>
      </div>
      <div class="inp-grp">
        <label>Password</label>
        <input type="password" id="inpPass" placeholder="Enter your password" autocomplete="current-password"/>
      </div>
    </div>
    <button class="auth-btn" id="authBtn" onclick="doAuth()">Sign In</button>
    <div class="auth-footer">
      <span id="authToggleText">Don't have an account?</span>
      <button class="auth-link" id="authToggle" onclick="toggleMode()">Sign Up</button>
    </div>
  </div>
</div>

<!-- ‚îÄ‚îÄ CHAT SCREEN ‚îÄ‚îÄ -->
<div id="chatScreen" class="screen">

  <button id="hamburger" onclick="toggleSidebar()">‚ò∞</button>

  <!-- Sidebar -->
  <div id="sidebar">
    <div class="sb-header">
      <div class="brand-logo">ü§ñ</div>
      <span class="brand-name">CodeXGPT</span>
      <button class="sb-close" onclick="toggleSidebar()">‚Äπ</button>
    </div>
    <button class="new-chat-btn" onclick="newChat()">Ôºã New Chat</button>
    <div id="sessionsList"></div>
    <div class="sb-footer">
      <div class="credits">V 1.09 ¬∑ Credits - <a href="#">CodeX</a></div>
      <div class="user-row">
        <div class="avatar" id="userAvatar">U</div>
        <div class="uname" id="userNameEl">User</div>
        <button class="logout-btn" onclick="logout()">‚á¶ Logout</button>
      </div>
    </div>
  </div>

  <!-- Chat Area -->
  <div id="chatArea">
    <div id="messages">
      <!-- Empty state -->
      <div id="emptyState">
        <div class="empty-logo">ü§ñ</div>
        <div class="empty-title">How can I help you today?</div>
        <div class="empty-sub">Start a conversation below or pick a suggestion.</div>
        <div class="suggestions">
          <button class="sug-card" onclick="sendSuggestion('Explain quantum computing in simple terms')">
            <span class="sug-icon">‚öôÔ∏è</span><span>Explain quantum computing</span>
          </button>
          <button class="sug-card" onclick="sendSuggestion('Write a Python function to sort a list')">
            <span class="sug-icon">üíª</span><span>Help me write code</span>
          </button>
          <button class="sug-card" onclick="sendSuggestion('What are the latest AI trends?')">
            <span class="sug-icon">üìà</span><span>Latest AI trends</span>
          </button>
          <button class="sug-card" onclick="sendSuggestion('Creative ideas for a birthday party')">
            <span class="sug-icon">‚ö°</span><span>Get creative ideas</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Input -->
    <div class="input-area">
      <div class="input-wrap" id="inputWrap">
        <div class="img-preview-wrap" id="imgPreviewWrap" style="display:
